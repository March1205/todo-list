{% extends "list/base.html" %}

{% block title %}<title>Todo List - Home</title>{% endblock %}

{% block content %}
<h1 class="mb-3">TODO list</h1>
<a href="{% url 'list:task_create' %}" class="btn btn-primary mb-3">Add task</a>
<div class="list-group">
    {% for task in tasks %}
        <div class="list-group-item">
            <h5 class="mb-1">{{ task.content }} 
                {% if task.is_done %}
                    <span class="text-success">Done</span>
                {% else %}
                    <span class="text-danger">Not done</span>
                {% endif %}
            </h5>
            <p class="mb-1">Created: {{ task.created_at|date:"F j, Y, g:i a" }} 
                {% if task.deadline %}
                    <br>Deadline: {{ task.deadline|date:"F j, Y, g:i a" }}
                {% endif %}
            </p>
            <p class="mb-1">Tags: 
                {% for tag in task.tags.all %}
                    <span class="badge badge-info">{{ tag.name }}</span>
                {% endfor %}
            </p>
            <div class="d-flex justify-content-between">
                <div>
                    <a href="{% url 'list:task_update' pk=task.id %}" class="btn btn-secondary btn-sm">Update</a>
                    <a href="{% url 'list:task_delete' pk=task.id %}" class="btn btn-danger btn-sm">Delete</a>
                </div>
                <div>
                    {% if not task.is_done %}
                        <a href="{% url 'list:toggle_status' pk=task.id %}" class="btn btn-success btn-sm">Complete</a>
                    {% else %}
                        <a href="{% url 'list:toggle_status' pk=task.id %}" class="btn btn-warning btn-sm">Undo</a>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% endblock %}
